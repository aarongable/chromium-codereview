
<script src="../lib/ba-linkify.js"></script>

<polymer-element name="cr-linkified-text" attributes="text" cache-csstext>
    <template><link rel="stylesheet" href="common.css"><style>
        :host([pre]) {
            white-space: pre-wrap;
            font-family: Monaco, monospace;
        }
    </style><div id="text"></div></template>
    <script>
    Polymer("cr-linkified-text", {
        text: "",
        textChanged: function(oldValue, newValue) {
            var root = this.shadowRoot.getElementById('text');

            root.innerHTML = "";

            linkify(newValue, {
                callback: function(text, href) {
                    if (href) {
                        var link = document.createElement("a");
                        link.href = href;
                        link.textContent = text;
                        root.appendChild(link);
                    } else {
                        root.appendChild(document.createTextNode(text));
                    }
                }
            });
        },
    });
  </script>
</polymer-element>
